---
description: >-
 Understanding CORS
title:  Same-Origin Policy and CORS           # Add title here
date: 2024-01-02 08:00:00 -0600                           # Change the date to match completion date
categories: [20 Web, Same-Origin Policy and CORS]                     # Change Templates to Writeup
tags: [web, same-origin policy, cors]     # TAG names should always be lowercase; replace template with writeup, and add relevant tags
show_image_post: false                                    # Change this to true
#image: /assets/img/machine-0-infocard.png                # Add infocard image here for post preview image
---

### Same-Origin Policy and CORS

There are three key conecpts to understand CORS:

- Origins and the Same-Origin Policy (SOP)
- Cross-Origin Resource Sharing (CORS)
- Sending Requests Between Origins

Modern web applications often use resources and data from multiple domains or web sites. Web applications load images, fonts, and even _JavaScript_ from external domains. When an HTML page or other resource on one domain instructs a browser to load content from another domain, the resulting request is a _cross-origin_ request.

Browsers implement the _Same-Origin Policy_ (SOP),[1](https://en.wikipedia.org/wiki/Same-origin_policy) a protective mechanism that limits how JavaScript code can interact with such requests and their responses. Developers can use _Cross-Origin Resource Sharing_ (CORS)[2](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing) to selectively relax the SOP on their applications.

_JSON with Padding_ (JSONP)[3](https://en.wikipedia.org/wiki/JSONP) is another technique for bypassing the SOP, but it has multiple security concerns and has largely been replaced by CORS.

We will explore these mechanisms and their security implications. We will also cover how to send cross-origin requests in JavaScript.

### Origins and the Same-Origin Policy (SOP)

The first concept needed to understand CORS is Same-Origin Policy, two considerations are:

1. Understand what an origin is in the context of web applications
2. Understand the Same-Origin Policy

In the context of web applications, an origin is a subset of a URL. It is the combination of a _protocol_,[1](https://en.wikipedia.org/wiki/Communication_protocol) a _hostname_, [2](https://en.wikipedia.org/wiki/Hostname) and a _port number_.[3](https://en.wikipedia.org/wiki/Port_(computer_networking))

Let's review a sample URL and determine its origin.

```bash
URL: https://www.example.com/blog/
Origin:  https://www.example.com
```

Our sample URL's protocol is _HTTPS_. Its domain is **www.example.com**. The URL does not include an explicit port number, so its origin uses the default port number of HTTPS (443). Notice that the origin includes the entire domain name, including the "www" subdomain, but does not include the path value (/blog).

We can also use JavaScript to derive the origin of a URL. The _URL_[4](https://developer.mozilla.org/en-US/docs/Web/API/URL) object includes an _origin_[5](https://developer.mozilla.org/en-US/docs/Web/API/URL/origin) property that returns the URL's origin.

Let's try it out. We'll need to open our web browser and then open its JavaScript Console with [F12]. We can then declare a new _URL_ object by typing **u = new URL("https://www.example.com/blog")** and pressing [Enter]. We can then check the URL's origin by typing **u.origin** and pressing [Enter].

![Creating a URL object and checking its origin](/assets/img/Pasted-image-20240102190855.png)

The _origin_ property returned **https://www.example.com**.

We can also read the _origin_[6](https://developer.mozilla.org/en-US/docs/Web/API/origin) property on the global scope after loading a web page. In our browser's JavaScript console, calling _self.origin_ is essentially the same as calling _window.origin_. Both properties will return the origin of the currently loaded web page.

Now that we understand origins, let's review the _Same-origin Policy_ (SOP).
